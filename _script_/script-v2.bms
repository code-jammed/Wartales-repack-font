idstring "PAK\0"
get DataOffset long
get fileSize long
get dummy short 
get numFolder long
for i = 0 < numFolder
	set folderName string ""
	CallFunction unpack 0 folderName
next i

StartFunction unpack folderName
	get namelen byte
	getdstring name namelen    
	get type byte
	if type == 0 || type == 2
		if type == 0
			get offset long
		elif type == 2
			get offset double
		endif
		get size long
		get dummy long
		math offset += Dataoffset
		set fname string FolderName
		string fname += /
		string fname += name
		log fname offset size
	elif type == 1
		string folderName += /
		string folderName += name        
		get numEntry long
		for j = 0 < numEntry
			set folderName2 string folderName
			CallFunction unpack 0 folderName2
		next j
	else
		print "Error! This type is not supported!"
		cleanexit
    endif
EndFunction
